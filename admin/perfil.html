<!DOCTYPE html>


button:hover{
transform:translateY(-2px);
box-shadow:0 10px 20px rgba(0,0,0,.2);
}


.msg{
text-align:center;
margin-top:18px;
font-weight:bold;
}
</style>
</head>
<body>


<div class="perfil-card">
<img src="logo-beto-carrero-roblox.png" alt="Logo">
<h1>Meu Perfil</h1>


<label>Nome Social</label>
<input id="nome" type="text">


<label>Usuário</label>
<input id="usuario" type="text">


<label>Senha</label>
<input id="senha" type="password">


<button onclick="salvarPerfil()">Salvar Alterações</button>


<div class="msg" id="msg"></div>
</div>


<script>
const URL_SCRIPT = 'https://script.google.com/macros/s/AKfycbyoUX7LDlvItQHcBLIgvjEfKjP00N96lWzS-SGdDSNf_2zr56BM6ZtcE6A7IPYD40ZH/exec';


const usuarioAtual = localStorage.getItem('usuario');


if(!usuarioAtual){
alert('Você precisa estar logado');
location.href = 'login.html';
}


function salvarPerfil(){
const nome = nomeInput.value;
const usuario = usuarioInput.value;
const senha = senhaInput.value;


fetch(URL_SCRIPT,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
acao:'atualizar',
usuarioAtual:usuarioAtual,
nome:nome,
usuarioNovo:usuario,
senha:senha
})
})
.then(r=>r.json())
.then(res=>{
msg.textContent = res.sucesso || res.erro;
if(res.sucesso){
localStorage.setItem('usuario',usuario);
}
});
}


const nomeInput = document.getElementById('nome');
const usuarioInput = document.getElementById('usuario');
const senhaInput = document.getElementById('senha');
const msg = document.getElementById('msg');
</script>
</body>
</html>
